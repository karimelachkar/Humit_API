<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VoiceMIDI</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/keyboard.css" />
    <link rel="stylesheet" href="css/visualizer.css" />
  </head>
  <body class="dark-theme">
    <div class="app-container">
      <!-- Header with logo and main controls -->
      <header class="main-header">
        <div class="logo">
          <img src="assets/logo.svg" alt="VoiceMIDI" class="logo-image" />
          <h1>VoiceMIDI</h1>
        </div>

        <div class="main-controls">
          <button id="btn-start" class="btn btn-primary">
            <span class="icon icon-play"></span>
            <span>Start</span>
          </button>
          <button id="btn-calibrate" class="btn">
            <span class="icon icon-mic"></span>
            <span>Calibrate</span>
          </button>
          <button id="btn-settings" class="btn">
            <span class="icon icon-settings"></span>
            <span>Settings</span>
          </button>
        </div>
      </header>

      <!-- Main workspace area -->
      <main class="main-workspace">
        <!-- Left panel with visualization and note information -->
        <section class="panel panel-left">
          <div class="audio-visualizer">
            <canvas id="waveform-canvas"></canvas>
            <div class="pitch-indicators">
              <div id="note-display" class="note-display">--</div>
              <div id="frequency-display" class="frequency-display">0 Hz</div>
            </div>
          </div>

          <div class="keyboard-visual">
            <div class="piano-keyboard" id="piano-keyboard">
              <!-- Virtual keyboard will be generated by JS -->
            </div>
          </div>

          <div class="audio-meter">
            <div class="meter-label">Input Level</div>
            <div class="meter-bar">
              <div id="audio-level-meter" class="meter-fill"></div>
            </div>
          </div>
        </section>

        <!-- Right panel with settings and controls -->
        <section class="panel panel-right">
          <div class="panel-section">
            <h2>Scale & Key</h2>
            <div class="control-row">
              <label for="key-select">Key:</label>
              <select id="key-select" class="custom-select">
                <option value="C">C</option>
                <option value="C#">C#</option>
                <option value="D">D</option>
                <option value="D#">D#</option>
                <option value="E">E</option>
                <option value="F">F</option>
                <option value="F#">F#</option>
                <option value="G">G</option>
                <option value="G#">G#</option>
                <option value="A">A</option>
                <option value="A#">A#</option>
                <option value="B">B</option>
              </select>
            </div>

            <div class="control-row">
              <label for="scale-select">Scale:</label>
              <select id="scale-select" class="custom-select">
                <option value="chromatic">Chromatic</option>
                <option value="major">Major</option>
                <option value="minor">Minor</option>
                <option value="pentatonic">Pentatonic</option>
                <option value="blues">Blues</option>
                <option value="custom">Custom</option>
              </select>
            </div>

            <div
              id="custom-scale-selector"
              class="custom-scale-selector hidden"
            >
              <!-- Custom scale note selector will be generated by JS -->
            </div>
          </div>

          <div class="panel-section">
            <h2>Pitch Controls</h2>
            <div class="control-row">
              <label for="pitch-correction-slider">Pitch Correction:</label>
              <input
                type="range"
                id="pitch-correction-slider"
                min="0"
                max="1"
                step="0.01"
                value="0.5"
                class="slider"
              />
              <span id="pitch-correction-value">50%</span>
            </div>

            <div class="control-row">
              <label for="note-delay-slider">Note Delay:</label>
              <input
                type="range"
                id="note-delay-slider"
                min="0"
                max="500"
                step="10"
                value="100"
                class="slider"
              />
              <span id="note-delay-value">100ms</span>
            </div>
          </div>

          <div class="panel-section">
            <h2>Velocity & Dynamics</h2>
            <div class="control-row">
              <label for="velocity-sensitivity-slider">Sensitivity:</label>
              <input
                type="range"
                id="velocity-sensitivity-slider"
                min="0"
                max="1"
                step="0.01"
                value="0.8"
                class="slider"
              />
              <span id="velocity-sensitivity-value">80%</span>
            </div>

            <div class="toggle-control">
              <label class="toggle-label">Fixed Velocity</label>
              <label class="toggle">
                <input type="checkbox" id="fixed-velocity-toggle" />
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div id="fixed-velocity-control" class="control-row hidden">
              <label for="fixed-velocity-slider">Value:</label>
              <input
                type="range"
                id="fixed-velocity-slider"
                min="1"
                max="127"
                step="1"
                value="100"
                class="slider"
              />
              <span id="fixed-velocity-value">100</span>
            </div>
          </div>

          <div class="panel-section">
            <h2>MIDI Output</h2>
            <div class="control-row">
              <label for="midi-port-select">MIDI Port:</label>
              <select id="midi-port-select" class="custom-select">
                <option value="">No MIDI ports available</option>
              </select>
              <button id="refresh-midi-btn" class="btn btn-small">
                <span class="icon icon-refresh"></span>
              </button>
            </div>

            <div class="control-row">
              <label for="midi-channel-select">Channel:</label>
              <select id="midi-channel-select" class="custom-select">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
              </select>
            </div>
          </div>

          <div class="panel-section">
            <h2>Audio Input</h2>
            <div class="control-row">
              <label for="audio-device-select">Microphone:</label>
              <select id="audio-device-select" class="custom-select">
                <option value="">No microphones available</option>
              </select>
              <button id="refresh-audio-btn" class="btn btn-small">
                <span class="icon icon-refresh"></span>
              </button>
            </div>
          </div>
        </section>
      </main>

      <!-- Status bar -->
      <footer class="status-bar">
        <div class="status-indicators">
          <div class="status-item" id="audio-status">
            <span class="status-icon audio-status-icon"></span>
            <span class="status-text">Audio: Inactive</span>
          </div>
          <div class="status-item" id="midi-status">
            <span class="status-icon midi-status-icon"></span>
            <span class="status-text">MIDI: Disconnected</span>
          </div>
          <div class="status-item" id="cpu-usage">
            <span class="status-text">CPU: 0%</span>
          </div>
        </div>
      </footer>
    </div>

    <!-- Dialogs -->
    <div id="calibration-dialog" class="dialog hidden">
      <div class="dialog-content">
        <h2>Microphone Calibration</h2>
        <p>Sing or hum a steady note at your normal volume.</p>
        <div class="calibration-meter">
          <div id="calibration-meter-fill" class="meter-fill"></div>
        </div>
        <div id="calibration-status">Ready to calibrate...</div>
        <div class="dialog-buttons">
          <button id="start-calibration-btn" class="btn btn-primary">
            Start
          </button>
          <button id="close-calibration-btn" class="btn">Cancel</button>
        </div>
      </div>
    </div>

    <div id="settings-dialog" class="dialog hidden">
      <div class="dialog-content">
        <h2>Settings</h2>
        <div class="settings-section">
          <h3>Interface</h3>
          <div class="control-row">
            <label for="theme-select">Theme:</label>
            <select id="theme-select" class="custom-select">
              <option value="dark">Dark</option>
              <option value="light">Light</option>
            </select>
          </div>
        </div>
        <div class="settings-section">
          <h3>Advanced</h3>
          <div class="control-row">
            <label for="buffer-size-select">Buffer Size:</label>
            <select id="buffer-size-select" class="custom-select">
              <option value="256">256</option>
              <option value="512">512</option>
              <option value="1024">1024</option>
              <option value="2048">2048</option>
            </select>
          </div>
          <div class="toggle-control">
            <label class="toggle-label">Pitch Bend</label>
            <label class="toggle">
              <input type="checkbox" id="pitch-bend-toggle" checked />
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        <div class="dialog-buttons">
          <button id="save-settings-btn" class="btn btn-primary">Save</button>
          <button id="close-settings-btn" class="btn">Cancel</button>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="js/app.js" type="module"></script>
  </body>
</html>
